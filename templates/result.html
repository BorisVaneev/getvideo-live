<!DOCTYPE html>
<html lang="{{ lang }}">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Download Result</title>
</head>
<body>
    <h1>Video Download Result</h1>
    <p>Here are the available download options for the video:</p>
    <p>Video URL: {{ result['url'] }}</p>
    <p>Author: {{ result['author'] }}</p>
    <p>Thumbnail: <img src="{{ result['thumbnail'] }}" alt="Thumbnail"></p>
    
    <h3>Available Formats:</h3>
    <ul>
        {% for media in result['medias'] %}
            <li>
                <!-- Кнопка для скачивания с имитацией клика -->
                <button onclick="startDownload('{{ media['url'] }}', '{{ result['title'] }} - {{ media['label'] }}')">
                    Download {{ media['label'] }}
                </button>
            </li>
        {% endfor %}
    </ul>

    <script>
        function startDownload(url, filename) {
            // Создаем элемент <a>, который будет использоваться для скачивания
            var link = document.createElement('a');
            link.href = url;
            link.download = filename;  // Устанавливаем имя для скачиваемого файла
            link.style.display = 'none';  // Делаем ссылку невидимой
            document.body.appendChild(link);
            link.click();  // Симулируем клик по ссылке, чтобы начать скачивание
            document.body.removeChild(link);  // Убираем ссылку из DOM после клика
        }
    </script>

    <a href="/">Back to Home</a>
</body>
</html>
